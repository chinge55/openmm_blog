TODO: 
1. Remove the need for temporary files. (maybe can use TemporaryDirectory of python)